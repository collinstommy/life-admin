<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Tracking App</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="stylesheet" href="/static/health-tracker.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo-container">
          <h1>Health Logger</h1>
          <p>Track your daily health activities</p>
        </div>
        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
          <button class="tab-btn active" data-tab="recorder-tab">
            <span class="icon">üéôÔ∏è</span>Voice Record
          </button>
          <button class="tab-btn" data-tab="transcript-tab">
            <span class="icon">üìù</span>Text Input
          </button>
          <button class="tab-btn" data-tab="history-tab">
            <span class="icon">üìã</span>History
          </button>
        </nav>
      </header>

      <main>
        <!-- Record Tab Content -->
        <div class="active tab-content" id="recorder-tab">
          <section class="recorder-section">
            <div class="recorder-container">
              <div class="recorder-status" id="recorderStatus">
                Ready to record
              </div>
              <div class="recorder-timer" id="recordingTimer">00:00</div>
              <div class="recorder-controls">
                <button id="startRecordingBtn" class="btn btn-primary">
                  Start Recording
                </button>
                <button id="stopRecordingBtn" class="btn-danger btn" disabled>
                  Stop Recording
                </button>
              </div>
            </div>
          </section>

          <section
            class="preview-section"
            id="previewSection"
            style="display: none"
          >
            <h2>Recording Preview</h2>
            <div class="audio-player">
              <audio id="audioPreview" controls></audio>
            </div>
            <div class="preview-controls">
              <button id="uploadRecordingBtn" class="btn btn-success">
                Upload Recording
              </button>
              <button id="discardRecordingBtn" class="btn btn-secondary">
                Discard & Record Again
              </button>
            </div>
          </section>
        </div>

        <!-- Transcript Tab Content -->
        <div class="tab-content" id="transcript-tab">
          <section class="transcript-entry-section">
            <h2>Process Text Input</h2>
            <p class="description">
              Enter your health activities as text to generate a structured
              summary
            </p>
            <div class="transcript-form">
              <textarea
                id="transcriptInput"
                class="transcript-textarea"
                rows="8"
                placeholder="Example: Today I had overnight oats with berries for breakfast, a quinoa salad for lunch, and grilled vegetables for dinner. I did a 45-minute yoga session and walked for 30 minutes. I drank 2.5 liters of water and slept for 7.5 hours."
              ></textarea>
              <div class="transcript-controls">
                <button id="processTranscriptBtn" class="btn btn-success">
                  Process Text
                </button>
                <button id="clearTranscriptBtn" class="btn btn-secondary">
                  Clear
                </button>
              </div>
            </div>
          </section>
        </div>

        <!-- History Tab Content -->
        <div class="tab-content" id="history-tab">
          <section class="history-section">
            <h2>Recording History</h2>
            <p class="description">
              View your past health logs to help refine the AI prompt
            </p>

            <div class="loading-container" id="historyLoading">
              <div class="loader"></div>
              <p>Loading recordings...</p>
            </div>

            <div class="recordings-list" id="recordingsList">
              <!-- Recordings will be loaded here dynamically -->
            </div>
          </section>
        </div>

        <!-- Shared Results Section -->
        <section
          class="result-section"
          id="resultSection"
          style="display: none"
        >
          <h2>Processing Results</h2>
          <div class="processing-status" id="processingStatus">
            <div class="loader"></div>
            <p>Processing your data...</p>
          </div>
          <div class="result-data" id="resultData" style="display: none">
            <!-- For voice recording results only, show transcript -->
            <div
              id="voiceTranscriptContainer"
              class="transcript-container"
              style="display: none"
            >
              <h3>Raw Transcript</h3>
              <div id="transcriptText" class="transcript-text"></div>
            </div>
            <h3>Your Health Summary</h3>
            <pre id="resultJson" class="result-json"></pre>
          </div>
        </section>

        <section class="instructions">
          <h2>Recording Tips</h2>
          <ul>
            <li>Speak clearly and at a normal pace</li>
            <li>
              Include information about your meals, exercise, sleep, water
              intake, mood, etc.
            </li>
            <li>Mention the date if it's not for today</li>
            <li>For meals, specify breakfast, lunch, dinner, and snacks</li>
            <li>
              For workouts, include the type, duration, intensity (1-10), and
              any notes
            </li>
            <li>For sleep, mention hours and quality (1-10)</li>
          </ul>
        </section>
      </main>

      <footer>
        <p>&copy; 2024 Health Logger</p>
      </footer>
    </div>

    <script src="/static/js/recorder.js"></script>
    <script src="/static/js/app.js"></script>
  </body>
</html>
